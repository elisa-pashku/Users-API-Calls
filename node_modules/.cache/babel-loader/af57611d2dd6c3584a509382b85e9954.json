{"ast":null,"code":"var _jsxFileName = \"/Users/elisapashku/Desktop/React/api_call/src/Components/UsersList.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Table, Row, Container, Col, Button } from \"react-bootstrap\";\nimport \"../App.css\";\nimport SingleUser from \"./SingleUser\";\nimport { useHistory, Link } from \"react-router-dom\";\n\nfunction UsersList() {\n  const [error, setError] = useState(null);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [loadingDelete, setLoadingDelete] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  function isDeletingUser(id, loadingDelete) {\n    const newUsers = users.map(p => [...p]);\n    const index = users.findIndex(user => user.id === id);\n    newUsers[index].isLoadingDelete = loadingDelete;\n    return newUsers;\n  }\n\n  function handleDelete(id) {\n    setUsers(isDeletingUser(id, true));\n    fetch(`https://jsonplaceholder.typicode.com/users/${id}`, {\n      method: \"DELETE\"\n    }).then(() => {\n      getUsers();\n    }).catch(err => {\n      setUsers(isDeletingUser(id, false));\n    });\n  }\n\n  function getUsers() {\n    fetch(\"https://jsonplaceholder.typicode.com/users\").then(res => res.json()).then(results => {\n      setUsers(results);\n    }).catch(error => {\n      setError(error);\n    }).finally(() => setLoadingUsers(false));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 12\n      }\n    }, \"Error: \", error.message);\n  } else if (!setLoadingUsers) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 12\n      }\n    }, \"Loading\");\n  } else {\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      className: \"mt-4 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, \"My api calls\")), /*#__PURE__*/React.createElement(Col, {\n      className: \"text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/create\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, \"Create new user\")))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, \"UserName\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Website\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, users.map(user => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }, user.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }, user.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, user.username), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 19\n      }\n    }, user.website), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      onClick: handleDetails,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 23\n      }\n    }, \"Details\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"danger\",\n      onClick: () => handleDelete(props.user.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 23\n      }\n    }, props.user.isLoadingDelete ? \"Loading\" : \"Delete\")))))))));\n  }\n}\n\nexport default UsersList;","map":{"version":3,"sources":["/Users/elisapashku/Desktop/React/api_call/src/Components/UsersList.js"],"names":["React","useEffect","useState","Table","Row","Container","Col","Button","SingleUser","useHistory","Link","UsersList","error","setError","loadingUsers","setLoadingUsers","users","setUsers","loadingDelete","setLoadingDelete","history","getUsers","isDeletingUser","id","newUsers","map","p","index","findIndex","user","isLoadingDelete","handleDelete","fetch","method","then","catch","err","res","json","results","finally","message","name","username","website","handleDetails","props"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Table, Row, Container, Col, Button } from \"react-bootstrap\";\nimport \"../App.css\";\n\nimport SingleUser from \"./SingleUser\";\nimport { useHistory, Link } from \"react-router-dom\";\n\nfunction UsersList() {\n  const [error, setError] = useState(null);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [users, setUsers] = useState([]);\n  const [loadingDelete, setLoadingDelete] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  function isDeletingUser(id, loadingDelete) {\n    const newUsers = users.map((p) => [...p]);\n    const index = users.findIndex((user) => user.id === id);\n    newUsers[index].isLoadingDelete = loadingDelete;\n    return newUsers;\n  }\n\n  function handleDelete(id) {\n    setUsers(isDeletingUser(id, true));\n    fetch(`https://jsonplaceholder.typicode.com/users/${id}`, {\n      method: \"DELETE\",\n    })\n      .then(() => {\n        getUsers();\n      })\n      .catch((err) => {\n        setUsers(isDeletingUser(id, false));\n      });\n  }\n\n  function getUsers() {\n    fetch(\"https://jsonplaceholder.typicode.com/users\")\n      .then((res) => res.json())\n      .then((results) => {\n        setUsers(results);\n      })\n      .catch((error) => {\n        setError(error);\n      })\n      .finally(() => setLoadingUsers(false));\n  }\n\n  if (error) {\n    return <div>Error: {error.message}</div>;\n  } else if (!setLoadingUsers) {\n    return <div>Loading</div>;\n  } else {\n    return (\n      <Container>\n        <Row className=\"mt-4 mb-4\">\n          <Col className=\"text-center\">\n            <h1>My api calls</h1>\n          </Col>\n\n          <Col className=\"text-right\">\n            <Link to=\"/create\">\n              <Button>Create new user</Button>\n            </Link>\n          </Col>\n        </Row>\n        <Row>\n          <Table>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>First Name</th>\n                <th>UserName</th>\n                <th>Website</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user) => (\n                <tr>\n                  <td>{user.id}</td>\n                  <td>{user.name}</td>\n                  <td>{user.username}</td>\n                  <td>{user.website}</td>\n                  <td>\n                    <div>\n                      <Button\n                        variant=\"info\"\n                        onClick={handleDetails}\n                        className=\"mr-2\"\n                      >\n                        Details\n                      </Button>\n                      <Button\n                        variant=\"danger\"\n                        onClick={() => handleDelete(props.user.id)}\n                      >\n                        {props.user.isLoadingDelete ? \"Loading\" : \"Delete\"}\n                      </Button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </Row>\n      </Container>\n    );\n  }\n}\n\nexport default UsersList;\n"]},"metadata":{},"sourceType":"module"}